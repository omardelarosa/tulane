(function(){var a,b;a={TwitterFontana:{stylesheet:"/css/fontana.css",description:"TwitterFontana's default style"},Bootstrap:{stylesheet:"",description:"Just plain bootstrap"},Amelia:{stylesheet:"/bootstrap/amelia/bootstrap.min.css",description:"Sweet and cheery"},Cerulean:{stylesheet:"/bootstrap/cerulean/bootstrap.min.css",description:"A calm blue sky"},Cosmo:{stylesheet:"/bootstrap/cosmo/bootstrap.min.css",description:"An ode to Metro"},Cyborg:{stylesheet:"/bootstrap/cyborg/bootstrap.min.css",description:"Jet black and electric blue"},Flatly:{stylesheet:"/bootstrap/flatly/bootstrap.min.css",description:"Flat and modern"},Journal:{stylesheet:"/bootstrap/journal/bootstrap.min.css",description:"Crisp like a new sheet of paper"},Readable:{stylesheet:"/bootstrap/readable/bootstrap.min.css",description:"Optimized for legibility"},Simplex:{stylesheet:"/bootstrap/simplex/bootstrap.min.css",description:"Mini and minimalist"},Slate:{stylesheet:"/bootstrap/slate/bootstrap.min.css",description:"Shades of gunmetal gray"},Spacelab:{stylesheet:"/bootstrap/spacelab/bootstrap.min.css",description:"Silvery and sleek"},United:{stylesheet:"/bootstrap/united/bootstrap.min.css",description:"Ubuntu orange and unique font"}},b={Compress:"compress","Fade-In":"fade-in",Hinge:"hinge",Lightspeed:"lightspeed","Scroll-Down":"scroll-down","Scroll-Up":"scroll-up",Slide:"slide","Tilt-Scroll":"tilt-scroll",Vertigo:"vertigo","Zoom-In":"zoom-in"},$(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return g=$("#controls"),o=$("#signin"),p=$("#signout"),d=new Fontana.TwitterAuth,f=$(".fontana"),u=null,n=null,h=function(){return $.get("/pop/settings.html",{now:(new Date).getTime()}).success(function(a){return n=$(a),n.css({position:"absolute",top:"40px",left:0}),$("form",n).submit(function(a){return a.preventDefault(),!1}),$(".close",n).click(function(){return n.hide()}),k(n),l(n),m(n),n.appendTo(document.body)})},k=function(a){var b;return b=$("#search",a),$(document.body).hasClass("signedIn")?(b.attr("disabled",!1),b.keypress(function(a){return 13===a.which?(a.preventDefault(),b.change(),!1):void 0}),b.change(function(){var b;return b=$("#search",a).val(),b&&b!==u.datasource.q?t({transition:$("#transition",a).val()},$("#search",a).val()):void 0})):b.attr("disabled",!0)},l=function(b){var c;return c=$("#bootswatch",b),Object.keys(a).forEach(function(b){var d;return d=a[b],c.append("<option value='"+d.stylesheet+"'>"+b+" &mdash; "+d.description+"</option>")}),c.change(function(a){var b;return $("link.bootswatch",document.head).remove(),b=$(a.target).val(),b?$("<link rel='stylesheet' href='"+b+"' class='bootswatch'>").insertAfter($("link.bootstrap")):void 0})},m=function(a){var c;return c=$("#transition",a),Object.keys(b).forEach(function(a){var d;return d=b[a],c.append("<option value='"+d+"'>"+a+"</option>")}),c.change(function(a){var b;return b=$(a.target).val(),u.pause(),u.config({transition:b}),u.resume()})},r=function(){return n?n.toggle():h()},s=function(){var a;return a=$("[class*='icon-']",this),u.paused?(a.removeClass("icon-play"),a.addClass("icon-pause"),u.resume()):(a.removeClass("icon-pause"),a.addClass("icon-play"),u.pause())},q=function(){return Fontana.utils.isFullScreen()?Fontana.utils.cancelFullScreen():Fontana.utils.requestFullScreen(document.body)},e=function(){return d.activeSession(function(a){return a?i(a):j()})},i=function(a){var b;return $(document.body).addClass("signedIn"),b=$(".navbar-text",p),b.html(nano(b.data("text"),a)),o.addClass("hidden"),p.removeClass("hidden"),n?(k(n),t({transition:$("#transition",n).val()},$("#search",n).val())):t()},j=function(){return $(document.body).removeClass("signedIn"),o.removeClass("hidden"),p.addClass("hidden"),n?(k(n),c({transition:$("#transition",n).val()})):c()},t=function(a,b){var c;return null==a&&(a={}),null==b&&(b="#tulane"),u&&u.stop(),c=new Fontana.datasources.TwitterSearch(b),u=new Fontana.Visualizer(f,c),u.start(a)},c=function(a){var b;return null==a&&(a={}),u&&u.stop(),a.transition||(b=Math.floor(Math.random()*Fontana.Visualizer.transitionEffects.length),a.transition=Fontana.Visualizer.transitionEffects[b]),u=new Fontana.Visualizer(f,c.datasource),u.start(a)},c.datasource=new Fontana.datasources.HTML(f),c.datasource.getMessages(),$(".settings",g).click(function(){return r.call(this)}),$(".pause-resume",g).click(function(){return s.call(this)}),$(".fullscreen",g).click(function(){return q.call(this)}),$("button",o).click(function(){return d.signIn(e)}),$("button",p).click(function(){return d.signOut(e)}),$("#logos .close").click(function(){return $(this).parent().remove()}),e()})}).call(this),function(){null==this.Fontana&&(this.Fontana={}),this.Fontana.TwitterAuth=function(){function a(){}return a.prototype.activeSession=function(a){return $.get("/api/twitter/session/").success(function(b){return a(b)}).error(function(){return a(null)})},a.prototype.signIn=function(a){var b,c,d,e,f,g,h,i;return b=String.fromCharCode(Math.floor(24*Math.random())+65)+(new Date).getTime(),window[b]=a,g=700,c=700,d=(window.screen.width+g)/2,e=(screen.height+c)/2,f="/api/twitter/session/new/?next=/pop/twitter_success.html"+encodeURIComponent("?callback="+b),i="twitterFontanaLogin",h="location=0,menubar=0,status=0,width="+g+",height="+c+",top="+e+",left="+d,window.open(f,i,h).focus()},a.prototype.signOut=function(a){return $.post("/api/session/clear/").success(a)},a}()}.call(this);